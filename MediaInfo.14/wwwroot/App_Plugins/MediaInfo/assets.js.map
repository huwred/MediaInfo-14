{"version":3,"file":"assets.js","sources":["../../../../mediainfo.14.client/src/modal/modal-token.ts","../../../../mediainfo.14.client/src/actions/entity/exif.entity.action.ts","../../../../mediainfo.14.client/src/actions/entity/manifest.ts","../../../../mediainfo.14.client/src/modal/manifest.ts","../../../../mediainfo.14.client/src/index.ts"],"sourcesContent":["import { UmbModalToken } from \"@umbraco-cms/backoffice/modal\";\r\n\r\nexport interface MediaInfoCustomModalData {\r\n    headline: string;\r\n    content: string;\r\n}\r\n\r\nexport interface MediaInfoCustomModalValue {\r\n    content: string \r\n}\r\n\r\nexport const MEDIAINFO_CUSTOM_MODAL = new UmbModalToken<MediaInfoCustomModalData, MediaInfoCustomModalValue>(\r\n    \"mediainfo.custom.modal\",\r\n    {\r\n        modal: {\r\n            type: 'sidebar',\r\n            size: 'medium'\r\n        }\r\n    }\r\n);","import { UmbEntityActionArgs, UmbEntityActionBase } from '@umbraco-cms/backoffice/entity-action';\r\nimport { UmbMediaDetailRepository  } from '@umbraco-cms/backoffice/media';\r\nimport { UmbControllerHostElement } from \"@umbraco-cms/backoffice/controller-api\";\r\nimport { UMB_MODAL_MANAGER_CONTEXT, UmbModalManagerContext } from \"@umbraco-cms/backoffice/modal\";\r\nimport { MEDIAINFO_CUSTOM_MODAL } from \"../../modal/modal-token.ts\";\r\n\r\nexport class ExifEntityAction extends UmbEntityActionBase<UmbMediaDetailRepository> {\r\n     #modalManagerContext?: UmbModalManagerContext;\r\n     public _citiesData: string[];\r\n\tconstructor(host: UmbControllerHostElement, args: UmbEntityActionArgs<UmbMediaDetailRepository>)\r\n    {\r\n        super(host, args);\r\n                this.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (instance) => {\r\n            this.#modalManagerContext = instance;\r\n        });        \r\n\t}\r\n\r\n\tasync execute() {\r\n\r\n            const headers: Headers = new Headers()\r\n            headers.set('Content-Type', 'application/json')\r\n            headers.set('Accept', 'application/json')\r\n            const request: RequestInfo = new Request('/exiffiledata/' + this.args.unique?.toString(), {\r\n                method: 'GET',\r\n                headers: headers,\r\n            })\r\n            // Send the request and pass result to modal\r\n            return fetch(request)\r\n            .then(response => response.json())\r\n            .then(data=>{ \r\n                \r\n                this.#modalManagerContext?.open(this, MEDIAINFO_CUSTOM_MODAL, {\r\n                    data: {\r\n                        headline:'Exif Data',\r\n                        content: data\r\n                    }\r\n                });\r\n            });\r\n\t}\r\n}","import { UMB_MEDIA_ENTITY_TYPE, UMB_MEDIA_ROOT_ENTITY_TYPE  } from \"@umbraco-cms/backoffice/media\";\r\nimport { /*ManifestModal,*/ ManifestTypes } from \"@umbraco-cms/backoffice/extension-registry\";\r\nimport { ExifEntityAction } from \"./exif.entity.action\";\r\n\r\nconst entityActions: Array<ManifestTypes> = [\r\n\t{\r\n\t\ttype: 'entityAction',\r\n\t\tkind: 'default',\r\n\t\talias: 'Umb.EntityAction.Media.Info',\r\n\t\tname: 'Create Media Entity Action',\r\n\t\tweight: 10,\r\n\t\tapi: ExifEntityAction,\r\n\t\tforEntityTypes: [UMB_MEDIA_ROOT_ENTITY_TYPE, UMB_MEDIA_ENTITY_TYPE],\r\n\t\tmeta: {\r\n\t\t\ticon: 'icon-info',\r\n\t\t\tlabel: 'Media Info',\r\n\t\t},\r\n\r\n\t},\r\n];\r\n\r\n//const modals: Array<ManifestModal> = [\r\n//\t{\r\n//\t\ttype: 'modal',\r\n//\t\talias: 'Umb.Modal.Media.CreateOptions',\r\n//\t\tname: 'Media Create Options Modal',\r\n//\t\telement: () => import('./media-create-options-modal.element.js'),\r\n//\t},\r\n//];\r\n\r\nexport const manifests: Array<ManifestTypes> = [...entityActions/*, ...modals*/];\r\n\r\n","import { ManifestModal } from \"@umbraco-cms/backoffice/extension-registry\";\r\n\r\nconst modals: Array<ManifestModal> = [\r\n    {\r\n        type: 'modal',\r\n        alias: 'mediainfo.custom.modal',\r\n        name: 'MediaInfo custom modal',\r\n        js: () => import('./modal-element.js')\r\n    }\r\n];\r\n\r\nexport const manifests = [...modals];","import { UmbEntryPointOnInit } from '@umbraco-cms/backoffice/extension-api';\r\nimport { ManifestTypes } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\n// load up the manifests here.\r\nimport { manifests as entityActionManifests } from './actions/entity/manifest.ts';\r\nimport { manifests as modalManifests } from './modal/manifest.ts';\r\n\r\nconst manifests: Array<ManifestTypes> = [\r\n    ...entityActionManifests,\r\n    ...modalManifests\r\n];\r\n\r\nexport const onInit: UmbEntryPointOnInit = (_host, extensionRegistry) => {\r\n    \r\n    // register them here. \r\n    extensionRegistry.registerMany(manifests);\r\n};"],"names":["MEDIAINFO_CUSTOM_MODAL","UmbModalToken","ExifEntityAction","UmbEntityActionBase","host","args","__privateAdd","_modalManagerContext","UMB_MODAL_MANAGER_CONTEXT","instance","__privateSet","headers","request","_a","response","data","__privateGet","entityActions","UMB_MEDIA_ROOT_ENTITY_TYPE","UMB_MEDIA_ENTITY_TYPE","manifests","modals","entityActionManifests","modalManifests","onInit","_host","extensionRegistry"],"mappings":";;;;;;;;;;;;AAWO,MAAMA,IAAyB,IAAIC;AAAA,EACtC;AAAA,EACA;AAAA,IACI,OAAO;AAAA,MACH,MAAM;AAAA,MACN,MAAM;AAAA,IACV;AAAA,EACJ;AACJ;;ACbO,MAAMC,UAAyBC,EAA8C;AAAA,EAGnF,YAAYC,GAAgCC,GACzC;AACI,UAAMD,GAAMC,CAAI;AAJnB,IAAAC,EAAA,MAAAC,GAAA;AAKgB,SAAA,eAAeC,GAA2B,CAACC,MAAa;AACjE,MAAAC,EAAA,MAAKH,GAAuBE;AAAA,IAAA,CAC/B;AAAA,EACR;AAAA,EAEA,MAAM,UAAU;;AAEC,UAAAE,IAAmB,IAAI;AACrB,IAAAA,EAAA,IAAI,gBAAgB,kBAAkB,GACtCA,EAAA,IAAI,UAAU,kBAAkB;AAClC,UAAAC,IAAuB,IAAI,QAAQ,qBAAmBC,IAAA,KAAK,KAAK,WAAV,gBAAAA,EAAkB,aAAY;AAAA,MACtF,QAAQ;AAAA,MACR,SAAAF;AAAA,IAAA,CACH;AAEM,WAAA,MAAMC,CAAO,EACnB,KAAK,CAAAE,MAAYA,EAAS,KAAM,CAAA,EAChC,KAAK,CAAMC,MAAA;;AAEH,OAAAF,IAAAG,EAAA,MAAAT,OAAA,QAAAM,EAAsB,KAAK,MAAMb,GAAwB;AAAA,QAC1D,MAAM;AAAA,UACF,UAAS;AAAA,UACT,SAASe;AAAA,QACb;AAAA,MAAA;AAAA,IACH,CACJ;AAAA,EACZ;AACD;AAhCKR,IAAA;ACHL,MAAMU,IAAsC;AAAA,EAC3C;AAAA,IACC,MAAM;AAAA,IACN,MAAM;AAAA,IACN,OAAO;AAAA,IACP,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAKf;AAAA,IACL,gBAAgB,CAACgB,GAA4BC,CAAqB;AAAA,IAClE,MAAM;AAAA,MACL,MAAM;AAAA,MACN,OAAO;AAAA,IACR;AAAA,EAED;AACD,GAWaC,IAAkC;AAAA,EAAC,GAAGH;AAAA;AAA4B,GC5BzEI,IAA+B;AAAA,EACjC;AAAA,IACI,MAAM;AAAA,IACN,OAAO;AAAA,IACP,MAAM;AAAA,IACN,IAAI,MAAM,OAAO,6BAAoB;AAAA,EACzC;AACJ,GAEaD,IAAY,CAAC,GAAGC,CAAM,GCJ7BD,IAAkC;AAAA,EACpC,GAAGE;AAAAA,EACH,GAAGC;AACP,GAEaC,IAA8B,CAACC,GAAOC,MAAsB;AAGrE,EAAAA,EAAkB,aAAaN,CAAS;AAC5C;"}